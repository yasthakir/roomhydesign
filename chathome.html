<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roomhy - Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f2f6; 
            color: #1F2937;
            /* No bottom padding needed as mobile nav is handled by main container */
        }

        /* Chat bubble styles */
        .chat-bubble-sent {
            background-color: #dcf8c6; /* WhatsApp-like green */
            color: #303030;
            border-radius: 0.75rem 0.75rem 0 0.75rem; /* Adjust rounding */
            box-shadow: 0 1px 1px rgba(0,0,0,0.05);
        }
        .chat-bubble-received {
            background-color: #ffffff; /* White */
            color: #303030;
            border-radius: 0.75rem 0.75rem 0.75rem 0; /* Adjust rounding */
             box-shadow: 0 1px 1px rgba(0,0,0,0.05);
        }

        /* Chat background pattern */
        #chat-messages-container {
             background-color: #e5ddd5; /* WhatsApp-like background color */
             background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23bdbdbd' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
             /* Pattern opacity adjusted in the SVG fill-opacity */
        }
        
        #chat-messages {
            overflow-y: auto;
            /* Add some padding so bubbles don't touch edges */
            padding: 1rem; 
        }

         /* Custom form focus styles */
        .form-input:focus, .form-select:focus, .form-checkbox:focus, .form-radio:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        
        /* Custom scrollbar for chat areas */
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent; 
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(0,0,0,0.2);
          border-radius: 20px;
          border: 3px solid transparent;
        }

        /* Hide scrollbar by default on main body if not needed */
        html {
            overflow-y: auto; /* Or scroll, depending on preference */
        }
        
    </style>
</head>
<body class="text-gray-800">

    <header class="sticky top-0 z-30 w-full bg-white/95 backdrop-blur-sm shadow-sm flex-shrink-0">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="flex h-20 items-center justify-between">
                <a href="index.html" class="flex-shrink-0">
                    <img src="logo.svg" alt="Roomhy Logo" class="h-10 w-auto">
                </a>
                <nav class="hidden items-center space-x-6 lg:flex">
                    <a href="index.html#why-roomhy" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">About Us</a>
                    <a href="index.html#contact" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Contact</a>
                    <a href="index.html#register-property" class="ml-4 flex items-center space-x-1 bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                        <i data-lucide="plus-circle" class="w-4 h-4"></i>
                        <span>Post Your Property</span>
                    </a>
                </nav>
                <button id="menu-toggle" class="p-2 rounded-lg hover:bg-gray-100 transition-colors lg:hidden">
                    <i data-lucide="menu" class="w-7 h-7 text-gray-800"></i>
                </button>
            </div>
        </div>
    </header>

    <div id="menu-overlay" class="fixed inset-0 bg-black/50 z-40 hidden"></div>
    <div id="mobile-menu" class="fixed top-0 right-0 w-72 h-full bg-white z-50 shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
         <div class="flex justify-between items-center p-4 border-b flex-shrink-0">
            <h2 class="text-xl font-bold text-blue-600">Menu</h2>
            <button id="menu-close" class="p-2"><i data-lucide="x" class="w-6 h-6 text-gray-700"></i></button>
        </div>
        <div class="p-4 border-b"><p class="text-gray-800 font-medium">Hi, User Name</p></div>
        <nav class="flex-grow p-4 space-y-2 overflow-y-auto">
             <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600"><i data-lucide="briefcase" class="w-5 h-5"></i><span>My Bookings</span></a>
            <a href="index.html#register-property" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600"><i data-lucide="building" class="w-5 h-5"></i><span>List Your Property</span></a>
            <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600"><i data-lucide="life-buoy" class="w-5 h-5"></i><span>24/7 Support</span></a>
             <a href="index.html#why-roomhy" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600"><i data-lucide="info" class="w-5 h-5"></i><span>About Us</span></a>
            <a href="index.html#contact" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-blue-50 hover:text-blue-600"><i data-lucide="mail" class="w-5 h-5"></i><span>Contact Us</span></a>
        </nav>
        <div class="p-4 border-t flex-shrink-0">
            <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:bg-red-50 hover:text-red-600"><i data-lucide="log-out" class="w-5 h-5"></i><span>Logout</span></a>
        </div>
    </div>

    <main class="container mx-auto px-0 sm:px-4 md:px-6 py-0 md:py-4 lg:py-6" 
          style="height: calc(100vh - 80px - 64px);" 
          lg:style="height: calc(100vh - 80px);"> 
        
        <div class="flex h-full rounded-lg shadow-lg overflow-hidden bg-white">

            <aside id="chat-sidebar" class="w-full lg:w-1/3 xl:w-1/4 border-r border-gray-200 flex flex-col transition-transform duration-300 ease-in-out lg:translate-x-0">
                 <div class="p-4 border-b flex-shrink-0">
                     <h2 class="text-xl font-bold">Chats</h2>
                     <div class="relative mt-4">
                         <input type="text" placeholder="Search chats..." class="w-full form-input pl-10 pr-4 py-2 border border-gray-200 rounded-full bg-gray-100 focus:bg-white focus:border-blue-500">
                         <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                             <i data-lucide="search" class="w-5 h-5"></i>
                         </div>
                     </div>
                 </div>
                 <div class="flex-grow overflow-y-auto custom-scrollbar p-2 space-y-1">
                     <a href="#" class="contact-item flex items-center space-x-3 p-3 rounded-lg bg-blue-50 hover:bg-blue-100 cursor-pointer" data-chat="Priya Sharma">
                         <div class="relative flex-shrink-0">
                             <img src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Priya Sharma" class="w-12 h-12 rounded-full">
                             <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></span> </div>
                         <div class="flex-grow overflow-hidden">
                             <div class="flex justify-between items-center">
                                 <p class="font-semibold text-blue-700 truncate">Priya Sharma</p>
                                 <p class="text-xs text-gray-500 flex-shrink-0 ml-2">6:15 PM</p>
                             </div>
                             <div class="flex justify-between items-center mt-1">
                                 <p class="text-sm text-gray-600 truncate">Okay, sounds good! See you...</p>
                                 </div>
                         </div>
                     </a>
                     <a href="#" class="contact-item flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 cursor-pointer" data-chat="Rohan Mehra">
                          <div class="relative flex-shrink-0">
                             <img src="https://i.pravatar.cc/150?u=a042581f4e29026704a" alt="Rohan Mehra" class="w-12 h-12 rounded-full">
                         </div>
                         <div class="flex-grow overflow-hidden">
                             <div class="flex justify-between items-center">
                                 <p class="font-semibold text-gray-800 truncate">Rohan Mehra</p>
                                 <p class="text-xs text-gray-500 flex-shrink-0 ml-2">Yesterday</p>
                             </div>
                             <div class="flex justify-between items-center mt-1">
                                 <p class="text-sm text-gray-500 truncate">Can you share the location again?</p>
                                  <span class="flex-shrink-0 ml-2 bg-blue-600 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center">3</span> </div>
                         </div>
                     </a>
                     <a href="#" class="contact-item flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 cursor-pointer" data-chat="Sunshine PG">
                         <div class="relative flex-shrink-0">
                             <div class="w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-500">
                                 <i data-lucide="building-2" class="w-6 h-6"></i> </div>
                         </div>
                         <div class="flex-grow overflow-hidden">
                             <div class="flex justify-between items-center">
                                 <p class="font-semibold text-gray-800 truncate">Sunshine PG (Owner)</p>
                                 <p class="text-xs text-gray-500 flex-shrink-0 ml-2">Oct 25</p>
                             </div>
                             <div class="flex justify-between items-center mt-1">
                                 <p class="text-sm text-gray-500 truncate">Yes, the room is available.</p>
                             </div>
                         </div>
                     </a>
                     </div>
            </aside>

            <section id="chat-window" class="flex-grow flex flex-col overflow-hidden hidden lg:flex">
                <div class="p-4 border-b flex items-center space-x-3 flex-shrink-0 bg-gray-50">
                    <button id="back-to-contacts" class="lg:hidden p-1 -ml-1 text-gray-600 hover:text-blue-600"> 
                         <i data-lucide="arrow-left" class="w-6 h-6"></i>
                    </button>
                     <img id="chat-header-img" src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Priya Sharma" class="w-10 h-10 rounded-full">
                     <div class="flex-grow">
                         <p id="chat-header-name" class="font-semibold text-gray-900">Priya Sharma</p>
                         <p id="chat-header-status" class="text-sm text-green-600">Online</p> 
                     </div>
                     <div class="flex space-x-2"> <button class="p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100">
                            <i data-lucide="phone" class="w-5 h-5"></i>
                        </button>
                        <button class="p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100">
                            <i data-lucide="video" class="w-5 h-5"></i>
                        </button>
                        <button class="p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100">
                            <i data-lucide="more-vertical" class="w-5 h-5"></i>
                        </button>
                     </div>
                </div>

                <div id="chat-messages-container" class="flex-grow overflow-hidden relative">
                    <div id="chat-messages" class="absolute inset-0 flex flex-col space-y-3 custom-scrollbar">
                         <div class="text-center my-2">
                             <span class="bg-gray-200 text-gray-600 text-xs px-2 py-1 rounded-full">Today</span>
                         </div>
                        <div class="flex justify-start group">
                            <div class="chat-bubble-received max-w-[70%] md:max-w-[60%] px-4 py-2 relative">
                                Hey! Are you still interested in the Koramangala PG?
                                <span class="absolute bottom-1 right-2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity">6:10 PM</span>
                            </div>
                        </div>
                        <div class="flex justify-end group">
                            <div class="chat-bubble-sent max-w-[70%] md:max-w-[60%] px-4 py-2 relative">
                                Hi Priya! Yes, definitely. Can I visit tomorrow evening?
                                <span class="absolute bottom-1 right-2 text-xs text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity">6:12 PM</span>
                            </div>
                        </div>
                         <div class="flex justify-start group">
                            <div class="chat-bubble-received max-w-[70%] md:max-w-[60%] px-4 py-2 relative">
                                 Sure, around 6 PM works. I'll send you the exact location pin.
                                 <span class="absolute bottom-1 right-2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity">6:14 PM</span>
                            </div>
                        </div>
                         <div class="flex justify-end group">
                            <div class="chat-bubble-sent max-w-[70%] md:max-w-[60%] px-4 py-2 relative">
                                Okay, sounds good! See you then. Thanks! 👍
                                <span class="absolute bottom-1 right-2 text-xs text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity">6:15 PM</span>
                            </div>
                        </div>
                         <div class="flex-grow"></div>
                    </div>
                </div>

                <div class="p-4 border-t flex items-center space-x-2 flex-shrink-0 bg-gray-100">
                    <button class="p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-200">
                        <i data-lucide="smile" class="w-6 h-6"></i> </button>
                     <input type="text" placeholder="Type a message..." class="flex-grow form-input px-4 py-2 border border-gray-300 rounded-full focus:border-blue-500 focus:ring-blue-500">
                    <button class="p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-200">
                        <i data-lucide="paperclip" class="w-6 h-6"></i> </button>
                     <button class="p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 flex items-center justify-center w-10 h-10">
                        <i data-lucide="send" class="w-5 h-5"></i> </button>
                </div>
            </section>
        </div>
    </main>
    
    <nav class="fixed bottom-0 left-0 w-full bg-white/95 backdrop-blur-sm border-t border-gray-200 z-30 lg:hidden flex-shrink-0">
        <div class="container mx-auto px-4 h-16 flex justify-around items-center max-w-lg">
            <a href="index.html" class="flex flex-col items-center justify-center text-gray-600 hover:text-blue-600"><i data-lucide="home" class="w-6 h-6"></i><span class="text-xs font-medium mt-0.5">Home</span></a>
            <a href="stays.html" class="flex flex-col items-center justify-center text-gray-600 hover:text-blue-600"><i data-lucide="layout-grid" class="w-6 h-6"></i><span class="text-xs font-medium mt-0.5">Stays</span></a>
            <a href="chat.html" class="flex flex-col items-center justify-center text-blue-600"> <i data-lucide="message-circle" class="w-6 h-6"></i><span class="text-xs font-medium mt-0.5">Chat</span></a>
            <a href="#save" class="flex flex-col items-center justify-center text-gray-600 hover:text-blue-600"><i data-lucide="heart" class="w-6 h-6"></i><span class="text-xs font-medium mt-0.5">Save</span></a>
            <a href="#profile" class="flex flex-col items-center justify-center text-gray-600 hover:text-blue-600"><i data-lucide="user" class="w-6 h-6"></i><span class="text-xs font-medium mt-0.5">Profile</span></a>
        </div>
    </nav>


    <script>
        lucide.createIcons();

        /* Mobile Side Menu JS */
        const menuToggle = document.getElementById('menu-toggle');
        const menuClose = document.getElementById('menu-close');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuOverlay = document.getElementById('menu-overlay');

        if (menuToggle && mobileMenu && menuClose && menuOverlay) {
            menuToggle.addEventListener('click', () => {
                mobileMenu.classList.remove('translate-x-full');
                menuOverlay.classList.remove('hidden');
            });
            const closeMenu = () => {
                mobileMenu.classList.add('translate-x-full');
                menuOverlay.classList.add('hidden');
            };
            menuClose.addEventListener('click', closeMenu);
            menuOverlay.addEventListener('click', closeMenu);
            mobileMenu.querySelectorAll('a').forEach(link => { link.addEventListener('click', closeMenu); });
        }
        
        /*
        ============================================================
        NEW JavaScript for Mobile Chat Navigation
        ============================================================
        */
        const chatSidebar = document.getElementById('chat-sidebar');
        const chatWindow = document.getElementById('chat-window');
        const contactItems = document.querySelectorAll('.contact-item');
        const backButton = document.getElementById('back-to-contacts');
        const chatHeaderName = document.getElementById('chat-header-name');
        const chatHeaderImg = document.getElementById('chat-header-img');
        const chatHeaderStatus = document.getElementById('chat-header-status'); // Assuming you might want to update this too

        // Function to show chat window and hide sidebar (mobile)
        function showChatWindow(contactName, contactImgSrc) {
            if (window.innerWidth < 1024) { // Only apply this logic on mobile
                 chatSidebar.classList.add('-translate-x-full'); // Slide sidebar out
                 chatSidebar.classList.add('hidden'); // Hide after transition (optional)
                 chatWindow.classList.remove('hidden'); // Show chat window
                 chatWindow.classList.add('flex'); // Ensure it's flex
                 
                 // Update chat header (example)
                 if(chatHeaderName) chatHeaderName.textContent = contactName;
                 if(chatHeaderImg && contactImgSrc) chatHeaderImg.src = contactImgSrc;
                 // You might fetch real status here
                 if(chatHeaderStatus) chatHeaderStatus.textContent = 'Online'; // Example
            } else {
                 // On desktop, just update header (and maybe mark contact as active)
                 if(chatHeaderName) chatHeaderName.textContent = contactName;
                 if(chatHeaderImg && contactImgSrc) chatHeaderImg.src = contactImgSrc;
                 if(chatHeaderStatus) chatHeaderStatus.textContent = 'Online'; 

                 // Remove active state from others, add to clicked
                 contactItems.forEach(item => item.classList.remove('bg-blue-50'));
                 // Find the clicked element again to add active state (or pass it in)
                 document.querySelector(`.contact-item[data-chat="${contactName}"]`)?.classList.add('bg-blue-50');
            }
             // TODO: Load actual chat messages for this contact
             // Scroll to bottom of messages (example)
            const chatMessages = document.getElementById('chat-messages');
            if(chatMessages) {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // Function to show sidebar and hide chat window (mobile)
        function showContactList() {
            if (window.innerWidth < 1024) { 
                chatSidebar.classList.remove('-translate-x-full');
                chatSidebar.classList.remove('hidden');
                chatWindow.classList.add('hidden');
                chatWindow.classList.remove('flex');
            }
            // No action needed on desktop
        }

        // Add click listeners to contact items
        contactItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent default link behavior
                const contactName = item.dataset.chat || 'Chat'; // Get name from data attribute
                const contactImg = item.querySelector('img');
                const contactImgSrc = contactImg ? contactImg.src : 'placeholder.png'; // Get image source
                showChatWindow(contactName, contactImgSrc);
            });
        });

        // Add click listener to back button
        if (backButton) {
            backButton.addEventListener('click', () => {
                showContactList();
            });
        }
        
        // Initial setup check on load/resize
         function adjustLayout() {
            if (window.innerWidth >= 1024) {
                // Desktop: Ensure sidebar is visible and chat window is visible
                chatSidebar.classList.remove('-translate-x-full', 'hidden');
                chatSidebar.classList.add('flex');
                chatWindow.classList.remove('hidden');
                 chatWindow.classList.add('flex');
            } else {
                // Mobile: By default show sidebar, hide chat (unless a chat was previously active)
                // This logic might need refinement based on remembering the state
                 if (!chatWindow.classList.contains('flex')) { // If chat window wasn't forced open
                    chatSidebar.classList.remove('-translate-x-full', 'hidden');
                    chatWindow.classList.add('hidden');
                    chatWindow.classList.remove('flex');
                 }
            }
         }

         window.addEventListener('resize', adjustLayout);
         adjustLayout(); // Run on initial load

         // Scroll chat to bottom initially (example)
         const chatMessagesOnLoad = document.getElementById('chat-messages');
         if(chatMessagesOnLoad) {
            chatMessagesOnLoad.scrollTop = chatMessagesOnLoad.scrollHeight;
         }

    </script>
</body>
</html>